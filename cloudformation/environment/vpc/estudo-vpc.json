{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Template para criação de uma VPC com sub-redes públicas e privadas, incluindo Internet Gateway e NAT Gateway.",
  "Resources": {
    "VPC": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsSupport": true,
        "EnableDnsHostnames": true,
        "Tags": [
          {
            "Key": "Name",
            "Value": "estudo-vpc"
          }
        ]
      }
    },
    "PublicSubnet1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "VPC" },
        "CidrBlock": "10.0.1.0/24",
        "AvailabilityZone": "us-east-1a",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          { "Key": "Name", "Value": "PublicSubnet1" }
        ]
      },
      "Export": {
        "Name": { "Fn::Sub": "${AWS::StackName}-PublicSubnet1" }
      }
    },
    "PublicSubnet2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "VPC" },
        "CidrBlock": "10.0.2.0/24",
        "AvailabilityZone": "us-east-1b",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          { "Key": "Name", "Value": "PublicSubnet2" }
        ]
      },
      "Export": {
        "Name": { "Fn::Sub": "${AWS::StackName}-PublicSubnet2" }
      }
    },
    // outros recursos da VPC
  },
  "Outputs": {
    "VpcId": {
      "Description": "ID da VPC",
      "Value": { "Ref": "VPC" },
      "Export": {
        "Name": { "Fn::Sub": "${AWS::StackName}-VpcId" }
      }
    }
  }
}
